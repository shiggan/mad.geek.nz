<!doctype html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<title>Getting Started Hugo 3 of 3 - mad.geek.nz</title>
<meta name="viewport" content="width=device-width, initial-scale=1">



  <meta name="generator" content="Hugo 0.62.0" />
  <meta itemprop="name" content="Getting Started Hugo 3 of 3">
<meta itemprop="description" content="Picking up from last time we have a site that runs fine locally; now its time to throw it up on github; there are however a couple of gotchas.
Github Pages likes to serve up a branch; and hugo likes to publish to a folder. Thanks to a git trick below we will be able to do both.
So we have our demo site we have been working on; time to put that to a side for now (you can set it on fire later) we are going to step through the process to get a hugo site served up and running on Github Pages.">
<meta itemprop="datePublished" content="2020-02-13T00:00:00&#43;00:00" />
<meta itemprop="dateModified" content="2020-02-13T00:00:00&#43;00:00" />
<meta itemprop="wordCount" content="654">



<meta itemprop="keywords" content="" />
  <meta property="og:title" content="Getting Started Hugo 3 of 3" />
<meta property="og:description" content="Picking up from last time we have a site that runs fine locally; now its time to throw it up on github; there are however a couple of gotchas.
Github Pages likes to serve up a branch; and hugo likes to publish to a folder. Thanks to a git trick below we will be able to do both.
So we have our demo site we have been working on; time to put that to a side for now (you can set it on fire later) we are going to step through the process to get a hugo site served up and running on Github Pages." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://shiggan.github.io/mad.geek.nz/blog/2020/02/getting-started-hugo-3-of-3/" />
<meta property="article:published_time" content="2020-02-13T00:00:00+00:00" />
<meta property="article:modified_time" content="2020-02-13T00:00:00+00:00" />

  <meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Getting Started Hugo 3 of 3"/>
<meta name="twitter:description" content="Picking up from last time we have a site that runs fine locally; now its time to throw it up on github; there are however a couple of gotchas.
Github Pages likes to serve up a branch; and hugo likes to publish to a folder. Thanks to a git trick below we will be able to do both.
So we have our demo site we have been working on; time to put that to a side for now (you can set it on fire later) we are going to step through the process to get a hugo site served up and running on Github Pages."/>
<meta name="twitter:site" content="@SHiggan"/>

  

  <link rel="stylesheet"
      href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.15.6/styles/Vs%202015.min.css">
  
    
      <link rel="stylesheet" href="../../../../css/normalize.css">
      <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Raleway:400,800,900|Source+Sans+Pro:400,700">
      <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/academicons/1.8.6/css/academicons.min.css">
      <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.9.0/css/all.css" integrity="sha384-i1LQnF23gykqWXg6jxC2ZbCbUMxyw5gLZY6UiUS98LYV5unm8GWmfkIS6jqJfb4E" crossorigin="anonymous">
      <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.3.5/jquery.fancybox.min.css" />
      
      
      <link rel="stylesheet" href="../../../../css/main.min.def756f4cd28354005a37cedc94c36d695bb1b0271e40edf1acf67d865b9ff70.css" integrity="sha256-3vdW9M0oNUAFo3ztyUw21pW7GwJx5A7fGs9n2GW5/3A=">
      <link rel="stylesheet" href="../../../../css/add-on.css">
    
  
  
  
  
    
  
  
<script type="application/javascript">
var doNotTrack = false;
if (!doNotTrack) {
	(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
	(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
	m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
	})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
	ga('create', 'UA-155313800-1', 'auto');
	
	ga('send', 'pageview');
}
</script>

</head>

  <body>
    
<header id="site-header">
  <nav id="site-nav">
    <h1 class="nav-title">
      <a href="../../../../">
        
          
            Blog
          
        
      </a>
    </h1>
    <menu id="site-nav-menu" class="flyout-menu">
      
        
          
          
            <a href="../../../../" class="link"><i class='fa fa-home'></i> Home</a>
          
        
      
        
          
          
            <a href="../../../../blog/" class="link"><i class='far fa-newspaper'></i> Blog</a>
          
        
      
        
          
          
            <a href="../../../../cv/" class="link"><i class='fas fa-file-contract'></i> Curriculum Vitae</a>
          
        
      
        
          
          
            <a href="../../../../categories/" class="link"><i class='fas fa-sitemap'></i> Categories</a>
          
        
      
      
      

    </menu>
    

    
    
    <a href="#site-nav" class="nav-toggle"><i class="fas fa-bars fa-2x"></i></a>
  </nav>
  
  
</header>

    <div id="wrapper">
      <section id="site-intro">
  <a href="../../../../"><img src="../../../../img/main/logo.jpg" class="circle" width="" alt="the mad geek" /></a>
  <header>
    <h1>mad.geek.nz</h1>
  </header>
  <main>
    <p>... something something inspirational but not too trite should go here.</p>
  </main>
  
    <footer>
      <ul class="socnet-icons">
        

        <li><a href="//github.com/shiggan" target="_blank" rel="noopener" title="GitHub" class="fab fa-github"></a></li>

<li><a href="//stackoverflow.com/users/114610" target="_blank" rel="noopener" title="Stack Overflow" class="fab fa-stack-overflow"></a></li>









<li><a href="//linkedin.com/in/steven-higgan-11702747" target="_blank" rel="noopener" title="LinkedIn" class="fab fa-linkedin"></a></li>















<li><a href="//twitter.com/SHiggan" target="_blank" rel="noopener" title="Twitter" class="fab fa-twitter"></a></li>








<li><a href="//keybase.io/madgeek" target="_blank" rel="noopener" title="keybase" class="fab fa-keybase"></a></li>

<li><a href="mailto:stevenh@mad.geek.nz" target="_blank" title="Email" class="far fa-envelope"></a></li>

      </ul>
    </footer>
  
</section>

      <main id="site-main">
        <article class="post">
  <header>
  <div class="title">
    
        <h2><a href="../../../../blog/2020/02/getting-started-hugo-3-of-3/">Getting Started Hugo 3 of 3</a></h2>
    
    
</div>
  <div class="meta">
    <time class="published" datetime="2020-02-13 00:00:00 &#43;0000 UTC">
      February 13, 2020
    </time>
    <span class="author">the mad geek</span>
    
      <p>4 minutes read</p>
    
  </div>
</header>

  <section id="socnet-share">
    




  


  </section>
  
  <a href="../../../../blog/2020/02/getting-started-hugo-3-of-3/" class="image featured">
    <img src="../../../../img/2020/02/getting%20started%20hugo%20-%203%20of%203/featured.jpg" alt="https://pixabay.com/photos/newborn-hand-tiny-finger-4748020/">
  </a>


  <div class="content">
    <p>Picking up from <a href="../../../../blog/2020/02/getting-started-hugo-2-of-3">last time</a> we have a site that runs fine locally; now its time to throw it up on github; there are however a couple of gotchas.</p>
<p>Github Pages likes to serve up a branch; and hugo likes to publish to a folder. Thanks to a git trick below we will be able to do both.</p>
<p>So we have our demo site we have been working on; time to put that to a side for now (you can set it on fire later) we are going to step through the process to get a hugo site served up and running on Github Pages.</p>
<h1 id="stuff-in-git">Stuff in Git</h1>
<p>Create a new repository on GitHub; for this example I will use this site as a reference <code>mad.geek.nz</code>.</p>
<p>Create a folder on your local computer; open up a command line in that local folder and:</p>
<p><code>git clone https://github.com/shiggan/mad.geek.nz.git .</code></p>
<p>The dot (<code>.</code>, period) at the end of the command tells it to clone directly in to the current folder without making any new directories.</p>
<p>Thanks to a magic incarnation we will apply for git; The master branch will store the &lsquo;built&rsquo; static website; while for the source-code we will throw that on a second branch; lets call that <code>source</code>; now is for some incarnations.</p>
<p>Push in a change to the master branch.</p>
<p><code>git commit --allow-empty -m &quot;first on master&quot; git push origin master</code></p>
<p>Push in a change to the source branch.</p>
<p><code>git commit --allow-empty -m &quot;first on source&quot; git push origin source</code></p>
<p>Now the magic incarnation that allows you to have a mixed of branches checked out at the same time. This will let us build the site in the &lsquo;public&rsquo; folder, which is pushed in to the master <code>master</code>.</p>
<p><code>git worktree add -B master public origin/master</code></p>
<blockquote>
<p>important : this worktree trick is something that is applied to your <code>local</code> repository only; it doesnt get pushed anywhere so if you ever need to pull down your site again you will need to pull out the sacred candles and chant the magical incarnation again in order to make this work.</p>
</blockquote>
<p>Because no amount of text can describe just how cool this is; here is what this achieves.</p>



  
    
    
    
    
  
  
  
  
  
  
  
  
  <div class="fancybox">
    <a data-fancybox="Post Gallery" href="../../../../img/2020/02/getting%20started%20hugo%20-%203%20of%203/figure1.png" data-caption="Figure 1"><img src="../../../../img/2020/02/getting%20started%20hugo%20-%203%20of%203/figure1.png"></a>
    <div class="caption">Figure 1</div>
  </div>


<p>With all of the standard setup done; you can either copy over what you did in steps 1, and 2 or you can start fresh by initalizing a new hugo site in the <code>source</code> branch</p>
<pre><code>git checkout source
hugo new site . --force
</code></pre><h1 id="stuff-in-github">Stuff in GitHub</h1>
<p>Hit the Options page for your GitHub Project</p>



  
    
    
    
    
  
  
  
  
  
  
  
  
  <div class="fancybox">
    <a data-fancybox="Post Gallery" href="../../../../img/2020/02/getting%20started%20hugo%20-%203%20of%203/figure2.png" data-caption="Figure 2"><img src="../../../../img/2020/02/getting%20started%20hugo%20-%203%20of%203/figure2.png"></a>
    <div class="caption">Figure 2</div>
  </div>


<p>Scroll down the options page untill you get to the <strong>GitHub Pages</strong> section</p>



  
    
    
    
    
  
  
  
  
  
  
  
  
  <div class="fancybox">
    <a data-fancybox="Post Gallery" href="../../../../img/2020/02/getting%20started%20hugo%20-%203%20of%203/figure3.png" data-caption="Figure 3"><img src="../../../../img/2020/02/getting%20started%20hugo%20-%203%20of%203/figure3.png"></a>
    <div class="caption">Figure 3</div>
  </div>


<ol>
<li>Set this to <code>master</code></li>
<li>Dont actually set this here.
By filling this in GitHub will drop a <code>CNAME</code> file in the <code>master</code> branch; which is not what we want. Instead if you want a custom domain name all you need to do is drop a CNAME file in your <code>static</code> folder over on your <code>source</code> branch; the only thing the file needs to contain is your custom domain name e.g.
<code>mad.geek.nz</code>



  
    
    
    
    
  
  
  
  
  
  
  
  
  <div class="fancybox">
    <a data-fancybox="Post Gallery" href="../../../../img/2020/02/getting%20started%20hugo%20-%203%20of%203/figure4.png" data-caption="Figure 4"><img src="../../../../img/2020/02/getting%20started%20hugo%20-%203%20of%203/figure4.png"></a>
    <div class="caption">Figure 4</div>
  </div>

</li>
<li><strong>Turn this On</strong> its free, its from <a href="https://letsencrypt.org/">Lets Encrypt</a></li>
</ol>
<h1 id="publish-script">Publish Script</h1>
<p>Somewhere on the interwebs I sole a script named <code>build-publish.cmd</code>; it wraps up the steps necessary for generating a new version of the site; and pushing it into GitHub; it will even generate a non suck log message which is a bit of a bonus.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-cmd" data-lang="cmd"># generate a less suck commit message
<span style="color:#66d9ef">for</span> <span style="color:#66d9ef">/f</span> <span style="color:#e6db74">&#34;</span><span style="color:#e6db74">skip=1</span><span style="color:#e6db74">&#34;</span> <span style="color:#ae81ff">%%</span>x <span style="color:#66d9ef">in</span> (<span style="color:#e6db74">&#39;wmic os get localdatetime&#39;</span>) <span style="color:#66d9ef">do</span> <span style="color:#66d9ef">if</span> <span style="color:#66d9ef"></span><span style="color:#66d9ef">not</span> <span style="color:#66d9ef">defined</span> MyDate <span style="color:#66d9ef">set</span> <span style="color:#66d9ef"></span>MyDate=<span style="color:#ae81ff">%%</span>x
<span style="color:#66d9ef">set</span> <span style="color:#66d9ef"></span>today=%MyDate:~0,4%-%MyDate:~4,2%-%MyDate:~6,2%
<span style="color:#66d9ef">set</span> <span style="color:#66d9ef"></span>commitMessage=<span style="color:#e6db74">&#34;</span><span style="color:#e6db74">site rebuild: </span>%today%<span style="color:#e6db74">&#34;</span>
<span style="color:#66d9ef">echo</span> %commitMessage%

# burn the old thing down
<span style="color:#66d9ef">echo</span> <span style="color:#e6db74">&#34;</span><span style="color:#e6db74">Removing the old website</span><span style="color:#e6db74">&#34;</span>
<span style="color:#66d9ef">pushd</span> public
git rm -rf *
<span style="color:#66d9ef">popd</span>

# build the new thing
<span style="color:#66d9ef">echo</span> <span style="color:#e6db74">&#34;</span><span style="color:#e6db74">Building the website</span><span style="color:#e6db74">&#34;</span>
hugo

# publish the new thing
<span style="color:#66d9ef">echo</span> <span style="color:#e6db74">&#34;</span><span style="color:#e6db74">Pushing the updated \`public\` folder to the \`master\` branch</span><span style="color:#e6db74">&#34;</span>
<span style="color:#66d9ef">pushd</span> public
git add *
git commit -m %commitMessage%
<span style="color:#66d9ef">popd</span>
git push origin master
</code></pre></div>
  </div>
  <footer>
    <ul class="stats">
  
    
    
      <li class="categories">
        <ul>
          
            
            <li><a class="article-category-link" href="https://shiggan.github.io/mad.geek.nz/categories/getting-started">getting started</a></li>
          
            
            <li><a class="article-category-link" href="https://shiggan.github.io/mad.geek.nz/categories/hugo">hugo</a></li>
          
        </ul>
      </li>
    
  
  
    <li class="tags">
      <ul>
        <li>None</li>
      </ul>
    </li>
  
</ul>

  </footer>
</article>
<script src="https://utteranc.es/client.js"
        repo="shiggan/mad.geek.nz"
        issue-term="og:title"
        label="post-comment"
        theme="github-light"
        crossorigin="anonymous"
        async>
</script>
<div class="pagination">
  
    <a href="../../../../blog/2020/02/getting-started-hugo-2-of-3/" class="button"><div class="previous"><div>Getting Started Hugo 2 of 3</div></div></a>
  
  
</div>


      </main>
      <section id="site-sidebar">
  
    <section id="recent-posts">
      <header>
        <h1>Recent posts</h1>
      </header>
      
      <article class="mini-post">
        <section>
          
  <a href="../../../../blog/2020/02/getting-started-hugo-3-of-3/" class="image featured">
    <img src="../../../../img/2020/02/getting%20started%20hugo%20-%203%20of%203/featured.jpg" alt="https://pixabay.com/photos/newborn-hand-tiny-finger-4748020/">
  </a>


        </section>
        <header>
          <h1><a href="../../../../blog/2020/02/getting-started-hugo-3-of-3/">Getting Started Hugo 3 of 3</a></h1>
          <time class="published" datetime="">February 13, 2020</time>
        </header>
      </article>
      
      <article class="mini-post">
        <section>
          
  <a href="../../../../blog/2020/02/getting-started-hugo-2-of-3/" class="image featured">
    <img src="../../../../img/2020/02/getting%20started%20hugo%20-%202%20of%203/featured.jpg" alt="https://pixabay.com/photos/newborn-hand-tiny-finger-4748020/">
  </a>


        </section>
        <header>
          <h1><a href="../../../../blog/2020/02/getting-started-hugo-2-of-3/">Getting Started Hugo 2 of 3</a></h1>
          <time class="published" datetime="">February 11, 2020</time>
        </header>
      </article>
      
      <article class="mini-post">
        <section>
          
  <a href="../../../../blog/2020/01/getting-started-hugo-1-of-3/" class="image featured">
    <img src="../../../../img/2020/01/getting%20started%20hugo%20-%201%20of%203/featured.jpg" alt="">
  </a>


        </section>
        <header>
          <h1><a href="../../../../blog/2020/01/getting-started-hugo-1-of-3/">Getting Started Hugo 1 of 3</a></h1>
          <time class="published" datetime="">January 25, 2020</time>
        </header>
      </article>
      
      <article class="mini-post">
        <section>
          
  <a href="../../../../blog/2020/01/hello-world/" class="image featured">
    <img src="../../../../img/2020/01/hello-world/featured.jpg" alt="Pic 3">
  </a>


        </section>
        <header>
          <h1><a href="../../../../blog/2020/01/hello-world/">Hello World</a></h1>
          <time class="published" datetime="">January 5, 2020</time>
        </header>
      </article>
      
      
    </section>
  

  
    
      <section id="categories">
        <header>
          <h1><a href="../../../../categories">Categories</a></h1>
        </header>
        <ul>
          
            
          
          
          <li>
            
              <a href="../../../../categories/getting-started/">getting-started<span class="count">3</span></a>
            
          
          <li>
            
              <a href="../../../../categories/hugo/">hugo<span class="count">3</span></a>
            
          
          </li>
        </ul>
      </section>
    
  

  <section id="mini-bio">
    <header>
      <h1>About</h1>
    </header>
    <p>cofee, software, photography, random stuff</p>
    <footer>
      <a href="../../../../about" class="button">Learn More</a>
    </footer>
  </section>
</section>

      <footer id="site-footer">
  
      <ul class="socnet-icons">
        

        <li><a href="//github.com/shiggan" target="_blank" rel="noopener" title="GitHub" class="fab fa-github"></a></li>

<li><a href="//stackoverflow.com/users/114610" target="_blank" rel="noopener" title="Stack Overflow" class="fab fa-stack-overflow"></a></li>









<li><a href="//linkedin.com/in/steven-higgan-11702747" target="_blank" rel="noopener" title="LinkedIn" class="fab fa-linkedin"></a></li>















<li><a href="//twitter.com/SHiggan" target="_blank" rel="noopener" title="Twitter" class="fab fa-twitter"></a></li>








<li><a href="//keybase.io/madgeek" target="_blank" rel="noopener" title="keybase" class="fab fa-keybase"></a></li>

<li><a href="mailto:stevenh@mad.geek.nz" target="_blank" title="Email" class="far fa-envelope"></a></li>

      </ul>
  
  <p class="copyright">
    
      &copy; 2020
      
        mad.geek.nz
      
    . <br>
    Theme: <a href='https://github.com/pacollins/hugo-future-imperfect-slim' target='_blank' rel='noopener'>Hugo Future Imperfect Slim</a><br>A <a href='https://html5up.net/future-imperfect' target='_blank' rel='noopener'>HTML5 UP port</a> | Powered by <a href='https://gohugo.io/' title='0.62.0' target='_blank' rel='noopener'>Hugo</a>
  </p>
</footer>
<a id="back-to-top" href="#" class="fas fa-arrow-up fa-2x"></a>

      
  <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.15.6/highlight.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.15.6/languages/html.min.js"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.15.6/languages/css.min.js"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.15.6/languages/js.min.js"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.15.6/languages/toml.min.js"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.15.6/languages/cs.min.js"></script>
  <script>hljs.initHighlightingOnLoad();</script>


  
  <script src="https://code.jquery.com/jquery-3.3.1.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/skel/3.0.1/skel.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.3.5/jquery.fancybox.min.js"></script>
  <script src=../../../../js/util.js></script>
  <script src=../../../../js/main.js></script>
  <script src=../../../../js/add-on.js></script>
  




<script type="application/javascript">
var doNotTrack = false;
if (!doNotTrack) {
	window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
	ga('create', 'UA-155313800-1', 'auto');
	
	ga('send', 'pageview');
}
</script>
<script async src='https://www.google-analytics.com/analytics.js'></script>


    </div>
  </body>
</html>
